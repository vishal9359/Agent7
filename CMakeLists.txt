cmake_minimum_required(VERSION 3.15)
project(Agent7 VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Find required packages
find_package(PkgConfig REQUIRED)

# nlohmann/json can be included as header-only
# Option 1: Use FetchContent (preferred for standalone builds)
include(FetchContent)
FetchContent_Declare(
    json
    GIT_REPOSITORY https://github.com/nlohmann/json.git
    GIT_TAG v3.11.2
)
FetchContent_MakeAvailable(json)

# Option 2: If nlohmann/json is installed system-wide, uncomment:
# find_package(nlohmann_json REQUIRED)

# Clang is expected to be installed separately
# This agent processes CFG JSON generated by Clang tools
# The agent itself doesn't use Clang directly in this implementation

# NOTE: This project now uses Python (agent.py) instead of C++ (agent.cpp)
# This CMakeLists.txt is kept for reference but agent.cpp has been removed.
# To run the agent, use: python agent.py <source_directory>
#
# Source files (DISABLED - using Python now)
# add_executable(agent7 agent.cpp)

# Link libraries
target_link_libraries(agent7 PRIVATE
    nlohmann_json::nlohmann_json
)

# Compiler flags
if(CMAKE_CXX_COMPILER_ID MATCHES "Clang|GNU")
    target_compile_options(agent7 PRIVATE
        -Wall
        -Wextra
        -Wpedantic
    )
endif()

# Installation
install(TARGETS agent7
    RUNTIME DESTINATION bin
)


